sudo: required
language: python

services:
  - docker

install:
  - pip install -r ansible/tests/python-requirements.txt

script:
  # TODO: molecule will only run ansible-lint on the target playbook,
  # we should run it on all once they're compliant
  - bash -O extglob -c 'ansible-lint -v ansible/!(idr-03-postinstall.yml|idr-reset-users-groups.yml|molecule.yml|ansible.cfg)'
  - cd ansible; molecule test

notifications:
  webhooks: https://galaxy.ansible.com/api/v1/notifications/
