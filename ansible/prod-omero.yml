# Production tuning of server limits.conf, Postgres and NGINX required, but this will install a minimal OMERO server, 
# OMERO.web with NGINX and systemd configuration controlling both.

# Install the latest release, including PostgreSQL on the same server

- hosts: prod-omero
  roles:
  - role: omero-server
    # Taking this from the openstack playbook os-omero.yml, to install the systemd config.
    omero_systemd_setup: True
    # Variable to tell OMEGO to get Ice 3.5, not the 'latest ice'. Ice role doesn't install latest at the moment, but Ice 3.5.
    omero_omego_additional_args: "--ice 3.5"
    postgresql_users_databases:
    - user: omero
      password: omero
      databases: [omero]
