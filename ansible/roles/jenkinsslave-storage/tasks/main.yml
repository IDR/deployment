---
# Setup LVM partition for Jenkins-CI slave

- name: jenkins storage | setup lvm jenkins-workdir
  lvol:
    vg: "{{ vgname }}"
    state: present
    lv: jenkins-workdir
    size: "{{ jenkinssize }}"

- name: jenkins storage | format
  filesystem:
    fstype: ext4
    dev: /dev/{{ vgname }}/jenkins-workdir

- name: jenkins storage | mount
  mount:
    name: "{{ jenkinsworkdir }}"
    src: /dev/{{ vgname }}/jenkins-workdir
    dump: "1"
    passno: "2"
    fstype: ext4
    state: mounted
