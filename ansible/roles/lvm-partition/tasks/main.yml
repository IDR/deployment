---
# Setup LVM partition

- name: storage | create logical volume
  lvol:
    vg: "{{ vgname }}"
    lv: "{{ lvname }}"
    size: "{{ lvsize }}"
    opts: "{{ lvopts }}"

- name: storage | format
  filesystem:
    fstype: "{{ lvfilesystem }}"
    dev: /dev/{{ vgname }}/{{ lvname }}

- name: storage | mount scratch
  mount:
    name: "{{ lvmount }}"
    src: /dev/{{ vgname }}/{{ lvname }}
    dump: "1"
    passno: "2"
    fstype: "{{ lvfilesystem }}"
    state: mounted
