# run Search ngine container

- name: Deploying search engine
  hosts: "{{ idr_environment | default('idr') }}-searchengine-hosts"

  tasks:
  - name: Run docker searchengine
    become: yes
    docker_container:
      image: "{{ searchengine_docker_image }}"
      name: searchengine
      cleanup: True
      command: "run_app {{ searchengineurlprefix }}"
      networks:
      - name: searchengine-net
      published_ports:
      - "5577:5577"
      #restart: "{{ searchengine_conf_status | changed }}"
      state: started
      restart_policy: always
      volumes:
        - "{{ apps_folder }}/searchengine/searchengine/:/etc/searchengine/"
        - "{{ apps_folder }}/searchengine/searchengine/cachedata:/etc/searchengine/cachedata"
